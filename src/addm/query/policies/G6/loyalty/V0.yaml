policy_id: G6_loyalty_V0
version: '1.0'
overview:
  title: Customer Loyalty Assessment
  purpose: |
    Help assess customer loyalty and retention indicators using reviews as evidence.
    This is from the perspective of a business owner evaluating customer loyalty.
    Assign a label: Low Loyalty, Moderate Loyalty, or High Loyalty.
  incident_definition: |
    Consider reviews that mention any of the following:
    - return visits or intention to return
    - recommendations to others
    - emotional attachment or connection
    - loyalty despite issues

    Reviews from first-time visitors that don't mention return intent carry less weight.
normative:
  terms:
  - ref: shared:ACCOUNT_TYPE
  - ref: loyalty:RETURN_INTENT
  - ref: loyalty:RECOMMEND_INTENT
  - ref: loyalty:EMOTIONAL_CONNECTION
  - ref: loyalty:LOYALTY_DRIVER
  decision:
    verdicts:
    - Low Loyalty
    - Moderate Loyalty
    - High Loyalty
    ordered: true
    rules:
    - verdict: High Loyalty
      label: HIGH_LOYALTY
      logic: ANY
      conditions:
      - text: 50 or more reviews describe high emotional connection
        type: count_threshold
        filter:
          emotional_connection: high
        min_count: 50
        min_count_by_k:
          25: 9
          50: 16
          100: 30
      - text: 60 or more reviews strongly recommend
        type: count_threshold
        filter:
          recommend_intent: strongly_recommend
        min_count: 60
        min_count_by_k:
          25: 11
          50: 20
          100: 35
      - text: 40 or more reviews say they would definitely return
        type: count_threshold
        filter:
          return_intent: definitely
        min_count: 40
        min_count_by_k:
          25: 8
          50: 14
          100: 25
    - verdict: Low Loyalty
      label: LOW_LOYALTY
      precondition: High Loyalty does not apply
      logic: ANY
      conditions:
      - text: 20 or more reviews say 'will never return'
        type: count_threshold
        filter:
          return_intent: never
        min_count: 20
        min_count_by_k:
          25: 5
          50: 7
          100: 12
      - text: 40 or more reviews report unlikely to return
        type: count_threshold
        filter:
          return_intent: unlikely
        min_count: 40
        min_count_by_k:
          25: 7
          50: 12
          100: 22
      - text: 40 or more reviews warn others
        type: count_threshold
        filter:
          recommend_intent: warn_others
        min_count: 40
        min_count_by_k:
          25: 7
          50: 12
          100: 22
    - verdict: Moderate Loyalty
      label: MODERATE_LOYALTY
      default: true
  output:
    verdict:
      type: enum
      values:
      - Low Loyalty
      - Moderate Loyalty
      - High Loyalty
      required: true
    evidence:
      type: array
      items:
        review_id: string
        quote: string
      description: Relevant quotes supporting the verdict
    justification:
      type: string
      required: true
      description: Explain how the evidence was used to arrive at the final verdict
    confidence:
      type: enum
      values:
      - low
      - medium
      - high
      note: 'Based on evidence volume: low=1-2, medium=3-5, high=6+ relevant reviews'
    other_notes:
      type: string
      optional: true
      description: Any other relevant observations or caveats
