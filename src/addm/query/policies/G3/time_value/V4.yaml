policy_id: G3_time_value_V4
extends: G3_time_value_V3
version: '1.0'
overview:
  title: Time-Value Assessment
  purpose: |
    Help assess whether waiting at this restaurant is worth it using customer reviews as evidence.
    Assign a verdict: Not Worth Waiting, Worth Waiting, or Definitely Worth Waiting.

    This assessment uses a point-based scoring system with recency weighting.
  incident_definition: |
    Consider reviews that mention any of the following:
    - wait times for seating, food, or service
    - reservations and whether they were honored
    - whether the wait was justified by the experience
    - willingness to wait again

    Reviews that don't mention timing or waiting carry less weight.
normative:
  terms:
  - ref: shared:ACCOUNT_TYPE
  - ref: time_value:WAIT_TYPE
  - ref: time_value:WAIT_DURATION
  - ref: time_value:WAIT_JUSTIFICATION
  - ref: time_value:WOULD_WAIT_AGAIN
  scoring:
    field_mapping:
      severity_field: wait_justification
      value_mappings:
        definitely_worth_it: Exceptional - worth any wait
        worth_it: Worth the wait
        barely: Neutral/acceptable wait
        not_worth_it: Definitely not worth waiting
      modifier_mappings:
      - field: wait_duration
        value: none
        label: No wait ever
      - field: would_wait_again
        value: definitely
        label: Would wait again
      - field: wait_type
        value: reservation
        label: Reservations not honored
      - field: would_wait_again
        value: never
        label: Would not wait again
    description: |
      Calculate a time-value score by summing points from relevant reviews,
      with recency weighting applied. Popularity and wait times can change,
      so recent reviews are weighted more heavily.
    severity_points:
    - label: Exceptional - worth any wait
      points: 10
    - label: Worth the wait
      points: 5
    - label: Neutral/acceptable wait
      points: 0
    - label: Wait somewhat not worth it
      points: -3
    - label: Definitely not worth waiting
      points: -5
    - label: Left due to wait/complete waste
      points: -10
    modifiers:
    - label: No wait ever
      description: always seated immediately
      points: 3
    - label: Reservations honored
      description: reservations work well
      points: 2
    - label: Would wait again
      description: reviewer would gladly wait again
      points: 3
    - label: Reservations not honored
      description: had reservation but still waited long
      points: -5
    - label: Would not wait again
      description: reviewer explicitly wouldn't wait again
      points: -3
    reference_date: "2022-01-01"
    recency_rules:
    - age: Within 6 months
      weight: full point value
      max_age_years: 0.5
      weight_multiplier: 1.0
    - age: 6 months to 1 year
      weight: three-quarter point value (multiply by 0.75)
      max_age_years: 1.0
      weight_multiplier: 0.75
    - age: 1-2 years old
      weight: half point value (multiply by 0.5)
      max_age_years: 2.0
      weight_multiplier: 0.5
    - age: Over 2 years old
      weight: quarter point value (multiply by 0.25)
      max_age_years: 999
      weight_multiplier: 0.25
    thresholds:
    - verdict: Definitely Worth Waiting
      min_score: 1400
      min_score_by_k:
        25: 175
        50: 350
        100: 700
    - verdict: Not Worth Waiting
      max_score: 500
      max_score_by_k:
        25: 63
        50: 125
        100: 250
  decision:
    verdicts:
    - Not Worth Waiting
    - Worth Waiting
    - Definitely Worth Waiting
    ordered: true
    rules:
    - verdict: Definitely Worth Waiting
      label: DEFINITELY
      logic: ANY
      conditions:
      - Total time-value score is 1400 or higher (after recency weighting)
    - verdict: Not Worth Waiting
      label: NOT_WORTH
      precondition: Definitely Worth Waiting does not apply
      logic: ANY
      conditions:
      - Total time-value score is 500 or lower (after recency weighting)
    - verdict: Worth Waiting
      label: WORTH
      default: true
  output:
    verdict:
      type: enum
      values:
      - Not Worth Waiting
      - Worth Waiting
      - Definitely Worth Waiting
      required: true
    evidence:
      type: array
      items:
        review_id: string
        quote: string
      description: Relevant quotes supporting the verdict
    justification:
      type: string
      required: true
      description: Explain how the evidence and recency weighting were used to arrive at the final verdict
    confidence:
      type: enum
      values:
      - low
      - medium
      - high
      note: 'Based on evidence volume: low=1-2, medium=3-5, high=6+ relevant reviews'
    other_notes:
      type: string
      optional: true
      description: Any other relevant observations or caveats
