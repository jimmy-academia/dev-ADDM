policy_id: G2_romance_V3
extends: G2_romance_V2
version: '1.0'
overview:
  title: Romantic Dining Suitability Assessment
  purpose: |
    Help assess how suitable this restaurant is for romantic dining (dates, anniversaries, proposals)
    using customer reviews as evidence.
    Assign a suitability label: Not Recommended, Acceptable, or Recommended.

    This assessment uses a point-based scoring system with recency weighting.
  incident_definition: |
    Consider reviews that mention any of the following:
    - date nights, anniversaries, romantic occasions, proposals
    - ambiance, lighting, noise level, privacy
    - service style (rushed vs. attentive)
    - overall romantic atmosphere

    Reviews that only discuss food without mentioning atmosphere carry less weight.
normative:
  terms:
  - ref: shared:ACCOUNT_TYPE
  - ref: romance:AMBIANCE_QUALITY
  - ref: romance:NOISE_LEVEL
  - ref: romance:LIGHTING_QUALITY
  - ref: romance:SERVICE_STYLE
  - ref: romance:DATE_OUTCOME
  scoring:
    field_mapping:
      severity_field: date_outcome
      value_mappings:
        memorable: Romantic success (proposal, anniversary)
        positive: Positive date experience
        neutral: Neutral mention
        negative: Date disaster
      modifier_mappings:
      - field: lighting_quality
        value: candlelit
        label: Candlelit atmosphere
      - field: noise_level
        value: intimate
        label: Private seating
      - field: service_style
        value: rushed
        label: Rushed service
      - field: noise_level
        value: loud
        label: Loud music/crowd
    description: |
      Calculate a romance suitability score by summing points from relevant reviews,
      with recency weighting applied.
    severity_points:
    - label: Romantic success (proposal, anniversary)
      points: 15
    - label: Positive date experience
      points: 5
    - label: Neutral mention
      points: 0
    - label: Minor atmosphere issue
      points: -2
    - label: Major atmosphere issue
      points: -5
    - label: Date disaster
      points: -15
    modifiers:
    - label: Candlelit atmosphere
      description: explicitly mentions candles or romantic lighting
      points: 3
    - label: Private seating
      description: mentions privacy, secluded tables, or booths
      points: 3
    - label: Live music
      description: romantic live music mentioned
      points: 2
    - label: Rushed service
      description: service was rushed, couldn't linger
      points: -3
    - label: Loud music/crowd
      description: noise prevented conversation
      points: -5
    recency_rules:
    - age: Within 1 year
      weight: full point value
    - age: 1-2 years old
      weight: half point value (multiply by 0.5)
    - age: Over 2 years old
      weight: quarter point value (multiply by 0.25), unless review mentions permanent features (decor, layout)
    thresholds:
    - verdict: Recommended
      min_score: 400
      min_score_by_k:
        25: 50
        50: 100
        100: 200
    - verdict: Not Recommended
      max_score: -500
      max_score_by_k:
        25: -63
        50: -125
        100: -250
  decision:
    verdicts:
    - Not Recommended
    - Acceptable
    - Recommended
    ordered: true
    rules:
    - verdict: Recommended
      label: RECOMMENDED
      logic: ANY
      conditions:
      - Total suitability score is 400 or higher (after recency weighting)
    - verdict: Not Recommended
      label: NOT_RECOMMENDED
      precondition: Recommended does not apply
      logic: ANY
      conditions:
      - Total suitability score is -500 or lower (after recency weighting)
    - verdict: Acceptable
      label: ACCEPTABLE
      default: true
  output:
    verdict:
      type: enum
      values:
      - Not Recommended
      - Acceptable
      - Recommended
      required: true
    evidence:
      type: array
      items:
        review_id: string
        quote: string
      description: Relevant quotes supporting the verdict
    justification:
      type: string
      required: true
      description: Explain how the evidence and recency weighting were used to arrive at the final verdict
    confidence:
      type: enum
      values:
      - low
      - medium
      - high
      note: 'Based on evidence volume: low=1-2, medium=3-5, high=6+ relevant reviews'
    other_notes:
      type: string
      optional: true
      description: Any other relevant observations or caveats
