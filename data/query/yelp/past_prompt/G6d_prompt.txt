============================================================
Agenda
============================================================

Help assess what makes this restaurant unique or special.

Analyze each review to identify mentions of distinctive features, standout qualities, and memorable aspects.
For each record, extract the L0 primitives defined below.

This task combines complex formula (weighted factors, interactions)
with L1.5 uniqueness-type grouping for pattern detection.

============================================================
L0: Primitives (per-review extraction)
============================================================

UNIQUE_DISHES
- signature_standout: unique dish that's exceptional
- distinctive: dishes you can't find elsewhere
- creative: innovative or creative menu items
- standard: typical dishes, nothing unique
- not_mentioned: dish uniqueness not discussed

ATMOSPHERE_DISTINCTIVENESS
- one_of_a_kind: truly unique atmosphere
- memorable: distinctive, memorable setting
- themed: has interesting theme/concept
- generic: standard restaurant atmosphere
- not_mentioned: atmosphere uniqueness not discussed

SERVICE_STYLE
- exceptional_approach: unique service style that stands out
- personalized: notably personalized service
- standard: typical service approach
- impersonal: generic, cookie-cutter service
- not_mentioned: service style not discussed

CONCEPT_INNOVATION
- groundbreaking: truly innovative concept
- fresh: fresh take on dining
- interesting: has some unique elements
- derivative: feels like many other places
- not_mentioned: concept not discussed

STANDOUT_FEATURE
- yes_food: food is the standout
- yes_atmosphere: atmosphere is the standout
- yes_service: service is the standout
- yes_value: value proposition is the standout
- multiple: several standout features
- none: nothing particularly stands out
- not_mentioned: no standout discussed

MEMORABILITY
- unforgettable: will remember this experience
- memorable: notable, will remember
- forgettable: won't remember this place
- negative_memorable: memorable for bad reasons
- not_mentioned: memorability not discussed

============================================================
L1: Composites (derived per review) - COMPLEX
============================================================

Dish Uniqueness Score:
  signature_standout = +4.0
  distinctive = +2.5
  creative = +1.5
  standard = -0.5
  not_mentioned = 0

Atmosphere Score:
  one_of_a_kind = +3.5
  memorable = +2.0
  themed = +1.5
  generic = -1.0
  not_mentioned = 0

Service Style Score:
  exceptional_approach = +3.0
  personalized = +2.0
  standard = 0
  impersonal = -1.5
  not_mentioned = 0

Concept Score:
  groundbreaking = +3.5
  fresh = +2.0
  interesting = +1.0
  derivative = -1.5
  not_mentioned = 0

Memorability Score:
  unforgettable = +4.0
  memorable = +2.0
  forgettable = -2.5
  negative_memorable = -3.0
  not_mentioned = 0

L1_UNIQUENESS_SCORE = DISH_UNIQUENESS_SCORE + ATMOSPHERE_SCORE + SERVICE_STYLE_SCORE + CONCEPT_SCORE + MEMORABILITY_SCORE

MULTI_DIMENSIONAL_BONUS:
  If STANDOUT_FEATURE = multiple: +2.0
  Else: 0

L1_TOTAL_SCORE = L1_UNIQUENESS_SCORE + MULTI_DIMENSIONAL_BONUS

============================================================
L1.5: Uniqueness Type Grouping
============================================================

Group reviews by uniqueness type:
  CULINARY_UNIQUE = unique_dishes data (food innovation)
  ATMOSPHERE_UNIQUE = atmosphere_distinctiveness data
  EXPERIENCE_UNIQUE = service_style, concept_innovation data

For each uniqueness bucket, compute:
  BUCKET_N_REVIEWS = count of reviews in this bucket
  BUCKET_SUM_SCORE = sum of relevant scores in bucket
    (CULINARY: dish_uniqueness_score)
    (ATMOSPHERE: atmosphere_score)
    (EXPERIENCE: service_style_score + concept_score)
  BUCKET_MEAN_SCORE = BUCKET_SUM_SCORE / max(BUCKET_N_REVIEWS, 1)
  BUCKET_N_EXCEPTIONAL = count with top-tier rating
  BUCKET_N_GENERIC = count with generic/standard rating

Uniqueness Pattern Analysis:
  STRONGEST_CATEGORY = bucket with highest MEAN_SCORE
  STRONGEST_SCORE = MEAN_SCORE of STRONGEST_CATEGORY
  WEAKEST_CATEGORY = bucket with lowest MEAN_SCORE
  WEAKEST_SCORE = MEAN_SCORE of WEAKEST_CATEGORY
  N_CATEGORIES_DISTINCTIVE = count of buckets where MEAN_SCORE >= 2.0

  UNIQUENESS_PATTERN:
    if N_CATEGORIES_DISTINCTIVE >= 3: "original_concept"
    elif CULINARY_UNIQUE MEAN_SCORE >= 3.0: "culinary_destination"
    elif ATMOSPHERE_UNIQUE MEAN_SCORE >= 3.0: "immersive_environment"
    elif EXPERIENCE_UNIQUE MEAN_SCORE >= 2.5: "experiential_dining"
    elif STRONGEST_SCORE - WEAKEST_SCORE > 3.0: "one_dimensional"
    elif N_CATEGORIES_DISTINCTIVE >= 1: "emerging_identity"
    else: "identity_crisis"

============================================================
L2: Aggregates (restaurant-level)
============================================================

Constants:
  BASE_SCORE = 5.0

Counts:
  N_UNIQUENESS_REVIEWS = count of reviews with any uniqueness-related primitives
  N_UNFORGETTABLE = count where MEMORABILITY = unforgettable
  N_FORGETTABLE = count where MEMORABILITY = forgettable

Confidence Level:
  if N_UNIQUENESS_REVIEWS == 0: none
  elif N_UNIQUENESS_REVIEWS <= 2: low
  elif N_UNIQUENESS_REVIEWS <= 5: medium
  else: high

L1.5 Category Aggregation:
  TOTAL_CATEGORY_SCORE = sum of BUCKET_MEAN_SCORE across all category buckets
  N_CATEGORY_BUCKETS_ACTIVE = count of buckets where N_REVIEWS > 0
  MEAN_CATEGORY_SCORE = TOTAL_CATEGORY_SCORE / max(N_CATEGORY_BUCKETS_ACTIVE, 1)

============================================================
Formulas & Decision Policy
============================================================

Formulas:
  Pattern Multiplier (based on uniqueness pattern):
    if UNIQUENESS_PATTERN = "original_concept": PATTERN_MULT = 1.25
    elif UNIQUENESS_PATTERN in {"culinary_destination", "immersive_environment", "experiential_dining"}: PATTERN_MULT = 1.15
    elif UNIQUENESS_PATTERN = "one_dimensional": PATTERN_MULT = 0.95
    elif UNIQUENESS_PATTERN = "identity_crisis": PATTERN_MULT = 0.7
    else: PATTERN_MULT = 1.0

  ADJUSTED_SCORE = MEAN_CATEGORY_SCORE * PATTERN_MULT
  RAW_SCORE = BASE_SCORE + ADJUSTED_SCORE
  FINAL_SCORE = clamp(RAW_SCORE, 0.0, 10.0)

Decision Thresholds on FINAL_SCORE:
  - >= 7.5 => Highly Unique
  - >= 5.5 AND < 7.5 => Distinctive
  - >= 3.5 AND < 5.5 => Average Uniqueness
  - < 3.5 => Generic

Overrides:
  - If N_UNFORGETTABLE >= 2 => min Distinctive
  - If UNIQUENESS_PATTERN = "original_concept" => min Distinctive
  - If UNIQUENESS_PATTERN = "identity_crisis" AND N_FORGETTABLE >= 2 => max Average Uniqueness
  - Include identity note based on STRONGEST_CATEGORY
  - Include development note based on WEAKEST_CATEGORY if score < 0

============================================================
Output Schema
============================================================

{
  L0_primitives: [ ... one record per uniqueness-related review ... ],
  L1_composites: [
    {
      review_id,
      dish_uniqueness_score,
      atmosphere_score,
      service_style_score,
      concept_score,
      memorability_score,
      l1_uniqueness_score,
      multi_dimensional_bonus,
      l1_total_score
    },
    ...
  ],
  L1_5_category_buckets: {
    culinary: { n_reviews, sum_score, mean_score, n_exceptional, n_generic },
    atmosphere: { n_reviews, sum_score, mean_score, n_exceptional, n_generic },
    experience: { n_reviews, sum_score, mean_score, n_exceptional, n_generic },
    strongest_category,
    strongest_score,
    weakest_category,
    weakest_score,
    n_categories_distinctive,
    uniqueness_pattern
  },
  L2_aggregates: {
    N_UNIQUENESS_REVIEWS,
    CONFIDENCE_LEVEL,
    N_UNFORGETTABLE, N_FORGETTABLE,
    TOTAL_CATEGORY_SCORE,
    MEAN_CATEGORY_SCORE,
    PATTERN_MULT,
    BASE_SCORE,
    ADJUSTED_SCORE,
    RAW_SCORE,
    FINAL_SCORE
  },
  DecisionPolicy: {
    base_verdict_by_score,
    override_applied,
    VERDICT,
    identity_note (if applicable),
    development_note (if applicable)
  },
  decision_evidence: {
    high_score_reviews: [ {review_id, category, l1_total_score, quote}, ... ],
    low_score_reviews: [ {review_id, category, l1_total_score, quote}, ... ],
    category_evidence: {
      strongest_category,
      weakest_category,
      uniqueness_pattern
    }
  }
}
